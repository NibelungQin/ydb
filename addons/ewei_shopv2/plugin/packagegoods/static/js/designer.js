// eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('b 11=(n.3x)?14:v;b 3e=3(1r){g"3d"==3c 1r?n.3b(1r):1r};b 2n={21:3(){g 3(){1.2o.2g(1,2h)}}};b 2u=3(2I,2j){39(b 2i 37 2j){2I[2i]=2j[2i]}};b 2m=3(1w,9){g 3(){g 9.2g(1w,2h)}};b 1h=3(1w,9){b 2C=35.25.2G.34(2h).2G(2);g 3(2f){g 9.2g(1w,[2f||G.2f].3g(2C))}};b O=3(2e){g 2e.3i||n.3w.3v(2e,1S)};3 w(u,H,R){5(u.2v){u.2v(H,R,v)}r 5(u.2A){u.2A("1o"+H,R)}r{u["1o"+H]=R}};3 B(u,H,R){5(u.2z){u.2z(H,R,v)}r 5(u.2y){u.2y("1o"+H,R)}r{u["1o"+H]=1S}};b 1C=2n.21();1C.25={2o:3(2J,4){1.t=2J.13(0);1.o=1.l=1.D=1.E=0;1.U=1.W=1.V=1.X=0;1.1f=1.1e=0;1.1j=1.18=0;1.N=3(){};1.1d=1.1b=1.1c=1.1a=0;1.1B=1.1D=0;1.M=3(){};b 17=O(1.t);1.10=(y(17.3l)||0)+(y(17.3k)||0);1.Z=(y(17.3j)||0)+(y(17.2Z)||0);1.2t=1h(1,1.1C);1.m=2m(1,1.1l);1.1J(4);1.p=!!1.4.p;1.j=$(1.4.1V).13(0)||1S;1.f=6.I(1.4.f);1.a=6.I(1.4.a);1.d=6.I(1.4.d);1.c=6.I(1.4.c);1.i=!!1.4.i;1.F=6.I(1.4.F);1.q=6.I(1.4.q);1.s=!!1.4.s;1.S=6.h(1.4.S,0);1.1A=1.4.1A;1.t.J.P="2p";!1.j||O(1.j).P=="1T"||(1.j.J.P="1T")},1J:3(4){1.4={p:v,1V:"",f:0,a:1H,d:0,c:1H,i:v,F:2K,q:2K,s:v,S:0,1A:3(){}};2u(1.4,4||{})},3m:3(28,2F){b 9;5(!28)g;3n(2F.3r()){L"2c":9=1.26;Q;L"29":9=1.27;Q;L"19":9=1.1X;Q;L"2a":9=1.22;Q;L"19-2c":9=1.1q;Q;L"2a-2c":9=1.1v;Q;L"19-29":9=1.1y;Q;L"2a-29":30:9=1.1p};w(28.13(0),"2X",1h(1,1.1I,9))},1I:3(e,9,3s){e.2L?e.2L():(e.3q=14);1.M=9;1.o=1.t.1W;1.l=1.t.1Z;1.D=1.t.2U;1.E=1.t.2Y;1.V=e.z-1.o;1.U=e.z+1.o;1.X=e.x-1.l;1.W=e.x+1.l;1.1f=1.D+1.o;1.1e=1.E+1.l;5(1.s){1.S=6.h(1.S,0)||1.o/1.l;1.1j=1.D+1.o/2;1.18=1.E+1.l/2};5(1.p){b f=1.f,a=1.a,d=1.d,c=1.c;5(!!1.j){f=6.h(f,0);d=6.h(d,0);a=6.A(a,1.j.1W);c=6.A(c,1.j.1Z)};a=6.h(a,f+(1.i?1.F:0)+1.10);c=6.h(c,d+(1.i?1.q:0)+1.Z);1.N=3(){1.1d=a-1.D-1.10;1.1b=c-1.E-1.Z;1.1c=6.h(1.1e-d,1.i?1.q:0);1.1a=6.h(1.1f-f,1.i?1.F:0)};1.N();5(1.s){1.1B=6.A(1.1j-f,a-1.1j-1.10)*2;1.1D=6.A(1.18-d,c-1.18-1.Z)*2}};w(n,"1P",1.2t);w(n,"1G",1.m);5(11){w(1.t,"1Q",1.m);1.t.2R()}r{w(G,"1U",1.m);e.2Q()}},1C:3(e){G.1K?G.1K().2B():n.2N.2P();1.M(e);2D(1.t.J){2x=1.o+"16";2w=1.l+"16";2M=1.E+"16";19=1.D+"16"}1.1A()},26:3(e){1.24(1.W-e.x,1.1c);1.1t();1.1u(1.27)},27:3(e){1.24(e.x-1.X,1.1b);1.1z(1.26)},22:3(e){1.1Y(e.z-1.V,1.1d);1.1n(1.1X)},1X:3(e){1.1Y(1.U-e.z,1.1a);1.1s();1.1x(1.22)},1p:3(e){1.1k(e.z-1.V,1.1d,e.x-1.X,1.1b);1.1n(1.1y)||1.s||1.1z(1.1v)},1v:3(e){1.1k(e.z-1.V,1.1d,1.W-e.x,1.1c);1.1t();1.1n(1.1q)||1.s||1.1u(1.1p)},1y:3(e){1.1k(1.U-e.z,1.1a,e.x-1.X,1.1b);1.1s();1.1x(1.1p)||1.s||1.1z(1.1q)},1q:3(e){1.1k(1.U-e.z,1.1a,1.W-e.x,1.1c);1.1t();1.1s();1.1x(1.1v)||1.s||1.1u(1.1y)},1Y:3(8,K){8=1.2s(8,K);5(1.s){b 7=1.1i(8);5(1.p&&7>1.1D){7=1.1D;8=1.12(7)}r 5(1.i&&7<1.q){b 15=1.12(1.q);5(15<K){7=1.q;8=15}}1.l=7;1.E=1.18-7/2}1.o=8},24:3(7,C){7=1.2q(7,C);5(1.s){b 8=1.12(7);5(1.p&&8>1.1B){8=1.1B;7=1.1i(8)}r 5(1.i&&8<1.F){b 2k=1.1i(1.F);5(2k<C){8=1.F;7=2k}}1.o=8;1.D=1.1j-8/2}1.l=7},1k:3(8,K,7,C){8=1.2s(8,K);5(1.s){7=1.1i(8);5(1.p&&7>C){7=C;8=1.12(7)}r 5(1.i&&7<1.q){b 15=1.12(1.q);5(15<K){7=1.q;8=15}}}r{7=1.2q(7,C)}1.o=8;1.l=7},1t:3(){1.E=1.1e-1.l},1s:3(){1.D=1.1f-1.o},2q:3(7,C){7=6.A(1.p?C:7,7);7=6.h(1.i?1.q:7,7,0);g 7},2s:3(8,K){8=6.A(1.p?K:8,8);8=6.h(1.i?1.F:8,8,0);g 8},1i:3(8){g 6.h(6.I((8+1.10)/1.S-1.Z),0)},12:3(7){g 6.h(6.I((7+1.Z)*1.S-1.10),0)},1x:3(9){5(!(1.i||1.o)){1.M=9;1.V=1.U;1.p&&1.N();g 14}},1n:3(9){5(!(1.i||1.o)){1.M=9;1.U=1.V;1.1f=1.D;1.p&&1.N();g 14}},1z:3(9){5(!(1.i||1.l)){1.M=9;1.W=1.X;1.1e=1.E;1.p&&1.N();g 14}},1u:3(9){5(!(1.i||1.l)){1.M=9;1.X=1.W;1.p&&1.N();g 14}},1l:3(){B(n,"1P",1.2t);B(n,"1G",1.m);5(11){B(1.t,"1Q",1.m);1.t.2E()}r{B(G,"1U",1.m)}}};b k=2n.21();k.25={2o:3(2H,4){1.k=2H.13(0);1.23=1.20=0;1.2l=1.2b=0;1.2d=1h(1,1.2O);1.m=2m(1,1.1l);1.1J(4);1.1g=!!1.4.1g;1.f=y(1.4.f);1.a=y(1.4.a);1.d=y(1.4.d);1.c=y(1.4.c);1.1N=!!1.4.1N;1.1F=!!1.4.1F;1.1m=!!1.4.1m;1.1R=1.4.1R;1.1O=1.4.1O;1.1E=1.4.1E;1.Y=$(1.4.2W).13(0)||1.k;1.j=$(1.4.1V).13(0)||1S;1.k.J.P="2p";5(11&&!!1.4.2V){2D(1.Y.3u(n.3p("3o")).J){2x=2w="38%";3f="#31";32="33(36:0)";3a=0}}1.2r();w(1.Y,"2X",1h(1,1.1I))},1J:3(4){1.4={2W:"",1g:v,f:0,a:1H,d:0,c:1H,1V:"",1N:v,1F:v,1m:v,2V:v,1R:3(){},1O:3(){},1E:3(){}};2u(1.4,4||{})},1I:3(T){5(1.1m){g}1.2r();1.23=T.z-1.k.2U;1.20=T.x-1.k.2Y;1.2l=y(O(1.k).3t)||0;1.2b=y(O(1.k).3h)||0;w(n,"1P",1.2d);w(n,"1G",1.m);5(11){w(1.Y,"1Q",1.m);1.Y.2R()}r{w(G,"1U",1.m);T.2Q()};1.1R()},2r:3(){5(1.1g){1.a=6.h(1.a,1.f+1.k.2S);1.c=6.h(1.c,1.d+1.k.2T);!1.j||O(1.j).P=="1T"||O(1.j).P=="2p"||(1.j.J.P="1T")}},2O:3(T){5(1.1m){1.1l();g};G.1K?G.1K().2B():n.2N.2P();b 1L=T.z-1.23,1M=T.x-1.20;5(1.1g){b f=1.f,a=1.a,d=1.d,c=1.c;5(!!1.j){f=6.h(f,0);d=6.h(d,0);a=6.A(a,1.j.1W);c=6.A(c,1.j.1Z)};1L=6.h(6.A(1L,a-1.k.2S),f);1M=6.h(6.A(1M,c-1.k.2T),d)}5(!1.1N){1.k.J.19=1L-1.2l+"16"}5(!1.1F){1.k.J.2M=1M-1.2b+"16"}1.1O()},1l:3(){B(n,"1P",1.2d);B(n,"1G",1.m);5(11){B(1.Y,"1Q",1.m);1.Y.2E()}r{B(G,"1U",1.m)};1.1E()}};',62,220,'|this||function|options|if|Math|iHeight|iWidth|fun|mxRight|var|mxBottom|mxTop||mxLeft|return|max|Min|_mxContainer|Drag|_styleHeight|_fS|document|_styleWidth|Max|minHeight|else|Scale|_obj|oTarget|false|addEventHandler|clientY|parseInt|clientX|min|removeEventHandler|mxHeight|_styleLeft|_styleTop|minWidth|window|sEventType|round|style|mxWidth|case|_fun|_mxSet|CurrentStyle|position|break|fnHandler|Ratio|oEvent|_sideRight|_sideLeft|_sideDown|_sideUp|_Handle|_borderY|_borderX|isIE|RepairScaleWidth|get|true|tWidth|px|_style|_scaleTop|left|_mxLeftWidth|_mxDownHeight|_mxUpHeight|_mxRightWidth|_fixTop|_fixLeft|Limit|BindAsEventListener|RepairScaleHeight|_scaleLeft|RepairAngle|Stop|Lock|TurnLeft|on|RightDown|LeftUp|id|RepairLeft|RepairTop|TurnDown|RightUp|object|TurnRight|LeftDown|TurnUp|onResize|_mxScaleWidth|Resize|_mxScaleHeight|onStop|LockY|mouseup|9999|Start|SetOptions|getSelection|iLeft|iTop|LockX|onMove|mousemove|losecapture|onStart|null|relative|blur|mxContainer|clientWidth|Left|RepairX|clientHeight|_y|create|Right|_x|RepairY|prototype|Up|Down|resize|down|right|_marginTop|up|_fM|element|event|apply|arguments|property|source|tHeight|_marginLeft|Bind|Class|initialize|absolute|RepairHeight|Repair|RepairWidth|_fR|Extend|addEventListener|height|width|detachEvent|removeEventListener|attachEvent|removeAllRanges|args|with|releaseCapture|side|slice|drag|destination|obj|50|stopPropagation|top|selection|Move|empty|preventDefault|setCapture|offsetWidth|offsetHeight|offsetLeft|Transparent|Handle|mousedown|offsetTop|borderBottomWidth|default|fff|filter|alpha|call|Array|opacity|in|100|for|fontSize|getElementById|typeof|string|dobj|backgroundColor|concat|marginTop|currentStyle|borderTopWidth|borderRightWidth|borderLeftWidth|Set|switch|div|createElement|cancelBubble|toLowerCase|touch|marginLeft|appendChild|getComputedStyle|defaultView|all'.split('|'),0,{}))


var isIE = (document.all) ? true: false;
var dobj = function(id) {
    return "string" == typeof id ? document.getElementById(id) : id
};
var Class = {
    create: function() {
        return function() {
            this.initialize.apply(this, arguments)
        }
    }
};
var Extend = function(destination, source) {
    for (var property in source) {
        destination[property] = source[property]
    }
};
var Bind = function(object, fun) {
    return function() {
        return fun.apply(object, arguments)
    }
};
var BindAsEventListener = function(object, fun) {
    var args = Array.prototype.slice.call(arguments).slice(2);
    return function(event) {
        return fun.apply(object, [event || window.event].concat(args))
    }
};
var CurrentStyle = function(element) {
    return element.currentStyle || document.defaultView.getComputedStyle(element, null)
};
function addEventHandler(oTarget, sEventType, fnHandler) {
    if (oTarget.addEventListener) {
        oTarget.addEventListener(sEventType, fnHandler, false)
    } else if (oTarget.attachEvent) {
        oTarget.attachEvent("on" + sEventType, fnHandler)
    } else {
        oTarget["on" + sEventType] = fnHandler
    }
};
function removeEventHandler(oTarget, sEventType, fnHandler) {
    if (oTarget.removeEventListener) {
        oTarget.removeEventListener(sEventType, fnHandler, false)
    } else if (oTarget.detachEvent) {
        oTarget.detachEvent("on" + sEventType, fnHandler)
    } else {
        oTarget["on" + sEventType] = null
    }
};
var Resize = Class.create();
Resize.prototype = {
    initialize: function(obj, options) {
        this._obj = obj.get(0);
        this._styleWidth = this._styleHeight = this._styleLeft = this._styleTop = 0;
        this._sideRight = this._sideDown = this._sideLeft = this._sideUp = 0;
        this._fixLeft = this._fixTop = 0;
        this._scaleLeft = this._scaleTop = 0;
        this._mxSet = function() {};
        this._mxRightWidth = this._mxDownHeight = this._mxUpHeight = this._mxLeftWidth = 0;
        this._mxScaleWidth = this._mxScaleHeight = 0;
        this._fun = function() {};
        var _style = CurrentStyle(this._obj);
        this._borderX = (parseInt(_style.borderLeftWidth) || 0) + (parseInt(_style.borderRightWidth) || 0);
        this._borderY = (parseInt(_style.borderTopWidth) || 0) + (parseInt(_style.borderBottomWidth) || 0);
        this._fR = BindAsEventListener(this, this.Resize);
        this._fS = Bind(this, this.Stop);
        this.SetOptions(options);
        this.Max = !!this.options.Max;
        this._mxContainer = $(this.options.mxContainer).get(0) || null;
        this.mxLeft = Math.round(this.options.mxLeft);
        this.mxRight = Math.round(this.options.mxRight);
        this.mxTop = Math.round(this.options.mxTop);
        this.mxBottom = Math.round(this.options.mxBottom);
        this.Min = !!this.options.Min;
        this.minWidth = Math.round(this.options.minWidth);
        this.minHeight = Math.round(this.options.minHeight);
        this.Scale = !!this.options.Scale;
        this.Ratio = Math.max(this.options.Ratio, 0);
        this.onResize = this.options.onResize;
        this._obj.style.position = "absolute"; ! this._mxContainer || CurrentStyle(this._mxContainer).position == "relative" || (this._mxContainer.style.position = "relative")
    },
    SetOptions: function(options) {
        this.options = {
            Max: false,
            mxContainer: "",
            mxLeft: 0,
            mxRight: 9999,
            mxTop: 0,
            mxBottom: 9999,
            Min: false,
            minWidth: 50,
            minHeight: 50,
            Scale: false,
            Ratio: 0,
            onResize: function() {}
        };
        Extend(this.options, options || {})
    },
    Set: function(resize, side) {
        var fun;
        if (!resize) return;
        switch (side.toLowerCase()) {
            case "up":
                fun = this.Up;
                break;
            case "down":
                fun = this.Down;
                break;
            case "left":
                fun = this.Left;
                break;
            case "right":
                fun = this.Right;
                break;
            case "left-up":
                fun = this.LeftUp;
                break;
            case "right-up":
                fun = this.RightUp;
                break;
            case "left-down":
                fun = this.LeftDown;
                break;
            case "right-down":
            default:
                fun = this.RightDown
        };
        addEventHandler(resize.get(0), "mousedown", BindAsEventListener(this, this.Start, fun))
    },
    Start: function(e, fun, touch) {
        e.stopPropagation ? e.stopPropagation() : (e.cancelBubble = true);
        this._fun = fun;
        this._styleWidth = this._obj.clientWidth;
        this._styleHeight = this._obj.clientHeight;
        this._styleLeft = this._obj.offsetLeft;
        this._styleTop = this._obj.offsetTop;
        this._sideLeft = e.clientX - this._styleWidth;
        this._sideRight = e.clientX + this._styleWidth;
        this._sideUp = e.clientY - this._styleHeight;
        this._sideDown = e.clientY + this._styleHeight;
        this._fixLeft = this._styleLeft + this._styleWidth;
        this._fixTop = this._styleTop + this._styleHeight;
        if (this.Scale) {
            this.Ratio = Math.max(this.Ratio, 0) || this._styleWidth / this._styleHeight;
            this._scaleLeft = this._styleLeft + this._styleWidth / 2;
            this._scaleTop = this._styleTop + this._styleHeight / 2
        };
        if (this.Max) {
            var mxLeft = this.mxLeft,
                mxRight = this.mxRight,
                mxTop = this.mxTop,
                mxBottom = this.mxBottom;
            if ( !! this._mxContainer) {
                mxLeft = Math.max(mxLeft, 0);
                mxTop = Math.max(mxTop, 0);
                mxRight = Math.min(mxRight, this._mxContainer.clientWidth);
                mxBottom = Math.min(mxBottom, this._mxContainer.clientHeight)
            };
            mxRight = Math.max(mxRight, mxLeft + (this.Min ? this.minWidth: 0) + this._borderX);
            mxBottom = Math.max(mxBottom, mxTop + (this.Min ? this.minHeight: 0) + this._borderY);
            this._mxSet = function() {
                this._mxRightWidth = mxRight - this._styleLeft - this._borderX;
                this._mxDownHeight = mxBottom - this._styleTop - this._borderY;
                this._mxUpHeight = Math.max(this._fixTop - mxTop, this.Min ? this.minHeight: 0);
                this._mxLeftWidth = Math.max(this._fixLeft - mxLeft, this.Min ? this.minWidth: 0)
            };
            this._mxSet();
            if (this.Scale) {
                this._mxScaleWidth = Math.min(this._scaleLeft - mxLeft, mxRight - this._scaleLeft - this._borderX) * 2;
                this._mxScaleHeight = Math.min(this._scaleTop - mxTop, mxBottom - this._scaleTop - this._borderY) * 2
            }
        };
        addEventHandler(document, "mousemove", this._fR);
        addEventHandler(document, "mouseup", this._fS);
        if (isIE) {
            addEventHandler(this._obj, "losecapture", this._fS);
            this._obj.setCapture()
        } else {
            addEventHandler(window, "blur", this._fS);
            e.preventDefault()
        }
    },
    Resize: function(e) {
        window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty();
        this._fun(e);
        with(this._obj.style) {
            width = this._styleWidth + "px";
            height = this._styleHeight + "px";
            top = this._styleTop + "px";
            left = this._styleLeft + "px"
        }
        this.onResize()
    },
    Up: function(e) {
        this.RepairY(this._sideDown - e.clientY, this._mxUpHeight);
        this.RepairTop();
        this.TurnDown(this.Down)
    },
    Down: function(e) {
        this.RepairY(e.clientY - this._sideUp, this._mxDownHeight);
        this.TurnUp(this.Up)
    },
    Right: function(e) {
        this.RepairX(e.clientX - this._sideLeft, this._mxRightWidth);
        this.TurnLeft(this.Left)
    },
    Left: function(e) {
        this.RepairX(this._sideRight - e.clientX, this._mxLeftWidth);
        this.RepairLeft();
        this.TurnRight(this.Right)
    },
    RightDown: function(e) {
        this.RepairAngle(e.clientX - this._sideLeft, this._mxRightWidth, e.clientY - this._sideUp, this._mxDownHeight);
        this.TurnLeft(this.LeftDown) || this.Scale || this.TurnUp(this.RightUp)
    },
    RightUp: function(e) {
        this.RepairAngle(e.clientX - this._sideLeft, this._mxRightWidth, this._sideDown - e.clientY, this._mxUpHeight);
        this.RepairTop();
        this.TurnLeft(this.LeftUp) || this.Scale || this.TurnDown(this.RightDown)
    },
    LeftDown: function(e) {
        this.RepairAngle(this._sideRight - e.clientX, this._mxLeftWidth, e.clientY - this._sideUp, this._mxDownHeight);
        this.RepairLeft();
        this.TurnRight(this.RightDown) || this.Scale || this.TurnUp(this.LeftUp)
    },
    LeftUp: function(e) {
        this.RepairAngle(this._sideRight - e.clientX, this._mxLeftWidth, this._sideDown - e.clientY, this._mxUpHeight);
        this.RepairTop();
        this.RepairLeft();
        this.TurnRight(this.RightUp) || this.Scale || this.TurnDown(this.LeftDown)
    },
    RepairX: function(iWidth, mxWidth) {
        iWidth = this.RepairWidth(iWidth, mxWidth);
        if (this.Scale) {
            var iHeight = this.RepairScaleHeight(iWidth);
            if (this.Max && iHeight > this._mxScaleHeight) {
                iHeight = this._mxScaleHeight;
                iWidth = this.RepairScaleWidth(iHeight)
            } else if (this.Min && iHeight < this.minHeight) {
                var tWidth = this.RepairScaleWidth(this.minHeight);
                if (tWidth < mxWidth) {
                    iHeight = this.minHeight;
                    iWidth = tWidth
                }
            }
            this._styleHeight = iHeight;
            this._styleTop = this._scaleTop - iHeight / 2
        }
        this._styleWidth = iWidth
    },
    RepairY: function(iHeight, mxHeight) {
        iHeight = this.RepairHeight(iHeight, mxHeight);
        if (this.Scale) {
            var iWidth = this.RepairScaleWidth(iHeight);
            if (this.Max && iWidth > this._mxScaleWidth) {
                iWidth = this._mxScaleWidth;
                iHeight = this.RepairScaleHeight(iWidth)
            } else if (this.Min && iWidth < this.minWidth) {
                var tHeight = this.RepairScaleHeight(this.minWidth);
                if (tHeight < mxHeight) {
                    iWidth = this.minWidth;
                    iHeight = tHeight
                }
            }
            this._styleWidth = iWidth;
            this._styleLeft = this._scaleLeft - iWidth / 2
        }
        this._styleHeight = iHeight
    },
    RepairAngle: function(iWidth, mxWidth, iHeight, mxHeight) {
        iWidth = this.RepairWidth(iWidth, mxWidth);
        if (this.Scale) {
            iHeight = this.RepairScaleHeight(iWidth);
            if (this.Max && iHeight > mxHeight) {
                iHeight = mxHeight;
                iWidth = this.RepairScaleWidth(iHeight)
            } else if (this.Min && iHeight < this.minHeight) {
                var tWidth = this.RepairScaleWidth(this.minHeight);
                if (tWidth < mxWidth) {
                    iHeight = this.minHeight;
                    iWidth = tWidth
                }
            }
        } else {
            iHeight = this.RepairHeight(iHeight, mxHeight)
        }
        this._styleWidth = iWidth;
        this._styleHeight = iHeight
    },
    RepairTop: function() {
        this._styleTop = this._fixTop - this._styleHeight
    },
    RepairLeft: function() {
        this._styleLeft = this._fixLeft - this._styleWidth
    },
    RepairHeight: function(iHeight, mxHeight) {
        iHeight = Math.min(this.Max ? mxHeight: iHeight, iHeight);
        iHeight = Math.max(this.Min ? this.minHeight: iHeight, iHeight, 0);
        return iHeight
    },
    RepairWidth: function(iWidth, mxWidth) {
        iWidth = Math.min(this.Max ? mxWidth: iWidth, iWidth);
        iWidth = Math.max(this.Min ? this.minWidth: iWidth, iWidth, 0);
        return iWidth
    },
    RepairScaleHeight: function(iWidth) {
        return Math.max(Math.round((iWidth + this._borderX) / this.Ratio - this._borderY), 0)
    },
    RepairScaleWidth: function(iHeight) {
        return Math.max(Math.round((iHeight + this._borderY) * this.Ratio - this._borderX), 0)
    },
    TurnRight: function(fun) {
        if (! (this.Min || this._styleWidth)) {
            this._fun = fun;
            this._sideLeft = this._sideRight;
            this.Max && this._mxSet();
            return true
        }
    },
    TurnLeft: function(fun) {
        if (! (this.Min || this._styleWidth)) {
            this._fun = fun;
            this._sideRight = this._sideLeft;
            this._fixLeft = this._styleLeft;
            this.Max && this._mxSet();
            return true
        }
    },
    TurnUp: function(fun) {
        if (! (this.Min || this._styleHeight)) {
            this._fun = fun;
            this._sideDown = this._sideUp;
            this._fixTop = this._styleTop;
            this.Max && this._mxSet();
            return true
        }
    },
    TurnDown: function(fun) {
        if (! (this.Min || this._styleHeight)) {
            this._fun = fun;
            this._sideUp = this._sideDown;
            this.Max && this._mxSet();
            return true
        }
    },
    Stop: function() {
        removeEventHandler(document, "mousemove", this._fR);
        removeEventHandler(document, "mouseup", this._fS);
        if (isIE) {
            removeEventHandler(this._obj, "losecapture", this._fS);
            this._obj.releaseCapture()
        } else {
            removeEventHandler(window, "blur", this._fS)
        }
    }
};
var Drag = Class.create();
Drag.prototype = {
    initialize: function(drag, options) {
        this.Drag = drag.get(0);
        this._x = this._y = 0;
        this._marginLeft = this._marginTop = 0;
        this._fM = BindAsEventListener(this, this.Move);
        this._fS = Bind(this, this.Stop);
        this.SetOptions(options);
        this.Limit = !!this.options.Limit;
        this.mxLeft = parseInt(this.options.mxLeft);
        this.mxRight = parseInt(this.options.mxRight);
        this.mxTop = parseInt(this.options.mxTop);
        this.mxBottom = parseInt(this.options.mxBottom);
        this.LockX = !!this.options.LockX;
        this.LockY = !!this.options.LockY;
        this.Lock = !!this.options.Lock;
        this.onStart = this.options.onStart;
        this.onMove = this.options.onMove;
        this.onStop = this.options.onStop;
        this._Handle = $(this.options.Handle).get(0) || this.Drag;
        this._mxContainer = $(this.options.mxContainer).get(0) || null;
        this.Drag.style.position = "absolute";
        if (isIE && !!this.options.Transparent) {
            with(this._Handle.appendChild(document.createElement("div")).style) {
                width = height = "100%";
                backgroundColor = "#fff";
                filter = "alpha(opacity:0)";
                fontSize = 0
            }
        }
        this.Repair();
        addEventHandler(this._Handle, "mousedown", BindAsEventListener(this, this.Start))
    },
    SetOptions: function(options) {
        this.options = {
            Handle: "",
            Limit: false,
            mxLeft: 0,
            mxRight: 9999,
            mxTop: 0,
            mxBottom: 9999,
            mxContainer: "",
            LockX: false,
            LockY: false,
            Lock: false,
            Transparent: false,
            onStart: function() {},
            onMove: function() {},
            onStop: function() {}
        };
        Extend(this.options, options || {})
    },
    Start: function(oEvent) {
        if (this.Lock) {
            return
        }
        this.Repair();
        this._x = oEvent.clientX - this.Drag.offsetLeft;
        this._y = oEvent.clientY - this.Drag.offsetTop;
        this._marginLeft = parseInt(CurrentStyle(this.Drag).marginLeft) || 0;
        this._marginTop = parseInt(CurrentStyle(this.Drag).marginTop) || 0;
        addEventHandler(document, "mousemove", this._fM);
        addEventHandler(document, "mouseup", this._fS);
        if (isIE) {
            addEventHandler(this._Handle, "losecapture", this._fS);
            this._Handle.setCapture()
        } else {
            addEventHandler(window, "blur", this._fS);
            oEvent.preventDefault()
        };
        this.onStart()
    },
    Repair: function() {
        if (this.Limit) {
            this.mxRight = Math.max(this.mxRight, this.mxLeft + this.Drag.offsetWidth);
            this.mxBottom = Math.max(this.mxBottom, this.mxTop + this.Drag.offsetHeight); ! this._mxContainer || CurrentStyle(this._mxContainer).position == "relative" || CurrentStyle(this._mxContainer).position == "absolute" || (this._mxContainer.style.position = "relative")
        }
    },
    Move: function(oEvent) {
        if (this.Lock) {
            this.Stop();
            return
        };
        window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty();
        var iLeft = oEvent.clientX - this._x,
            iTop = oEvent.clientY - this._y;
        if (this.Limit) {
            var mxLeft = this.mxLeft,
                mxRight = this.mxRight,
                mxTop = this.mxTop,
                mxBottom = this.mxBottom;
            if ( !! this._mxContainer) {
                mxLeft = Math.max(mxLeft, 0);
                mxTop = Math.max(mxTop, 0);
                mxRight = Math.min(mxRight, this._mxContainer.clientWidth);
                mxBottom = Math.min(mxBottom, this._mxContainer.clientHeight)
            };
            iLeft = Math.max(Math.min(iLeft, mxRight - this.Drag.offsetWidth), mxLeft);
            iTop = Math.max(Math.min(iTop, mxBottom - this.Drag.offsetHeight), mxTop)
        }
        if (!this.LockX) {
            this.Drag.style.left = iLeft - this._marginLeft + "px"
        }
        if (!this.LockY) {
            this.Drag.style.top = iTop - this._marginTop + "px"
        }
        this.onMove()
    },
    Stop: function() {
        removeEventHandler(document, "mousemove", this._fM);
        removeEventHandler(document, "mouseup", this._fS);
        if (isIE) {
            removeEventHandler(this._Handle, "losecapture", this._fS);
            this._Handle.releaseCapture()
        } else {
            removeEventHandler(window, "blur", this._fS)
        };
        this.onStop()
    }
};